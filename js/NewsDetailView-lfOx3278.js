var e=(e,t,s)=>new Promise((r,a)=>{var l=e=>{try{o(s.next(e))}catch(t){a(t)}},n=e=>{try{o(s.throw(e))}catch(t){a(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(l,n);o((s=s.apply(e,t)).next())});import{a as t,b as s,A as r,c as a,_ as l}from"./index-CbVirBU-.js";import{d as n,u as o,j as i,p as c,l as d,k as x,B as m,F as u,z as p,D as g,I as y,r as h,o as v,w as f,f as w,A as b,m as k,n as _,x as j,t as C}from"./vendor-vue-DfeTMTng.js";/* empty css                                                                 */import"./vendor-utils-ByYb-_ZS.js";const M={class:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group"},z={class:"relative h-48 bg-gradient-to-br from-primary-50 to-secondary-50 overflow-hidden"},V={class:"absolute top-4 left-4"},B={class:"bg-primary-600 text-white text-xs font-medium px-3 py-1 rounded-full"},D={key:0,class:"absolute top-4 right-4"},N={class:"p-6"},A={class:"mb-4"},H={class:"text-xl font-bold text-gray-900 group-hover:text-primary-600 transition-colors line-clamp-2"},S={class:"text-gray-600 text-sm mb-4 line-clamp-3"},q={key:0,class:"mb-4"},I={class:"flex flex-wrap gap-2"},L={class:"flex items-center justify-between pt-4 border-t border-gray-100"},P={class:"flex items-center space-x-3"},E={class:"flex items-center text-sm text-gray-500"},F={class:"flex items-center text-sm text-gray-500"},G=t(n({__name:"NewsCard",props:{article:{}},setup(e){const t=e,s=o();function r(){s.push({name:"news-detail",params:{slug:t.article.slug}})}return(e,t)=>{return c(),i("article",M,[d("div",z,[t[1]||(t[1]=d("div",{class:"flex items-center justify-center h-full"},[d("div",{class:"text-center text-gray-400"},[d("svg",{class:"w-16 h-16 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})])])],-1)),d("div",V,[d("span",B,m(e.article.category),1)]),e.article.featured?(c(),i("div",D,[...t[0]||(t[0]=[d("span",{class:"bg-accent-500 text-white text-xs font-medium px-3 py-1 rounded-full"}," 推荐 ",-1)])])):x("",!0)]),d("div",N,[d("div",A,[d("h3",H,m(e.article.title),1)]),d("p",S,m(e.article.excerpt),1),e.article.tags.length>0?(c(),i("div",q,[d("div",I,[(c(!0),i(u,null,p(e.article.tags.slice(0,3),e=>(c(),i("span",{key:e,class:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded"}," #"+m(e),1))),128))])])):x("",!0),d("div",L,[d("div",P,[d("div",E,[t[2]||(t[2]=d("svg",{class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),g(" "+m(e.article.author),1)]),d("div",F,[t[3]||(t[3]=d("svg",{class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),g(" "+m((s=e.article.publishDate,new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}))),1)])]),d("button",{onClick:r,class:"flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors"},[...t[4]||(t[4]=[g(" 阅读全文 ",-1),d("svg",{class:"w-4 h-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])])]);var s}}}),[["__scopeId","data-v-c226dd30"]]),J={class:"news-detail-page"},K={key:0,class:"min-h-screen flex items-center justify-center"},O={key:1,class:"min-h-screen flex items-center justify-center"},Q={class:"text-center"},R={class:"text-gray-600 mb-6"},T={key:2,class:"py-8"},U={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 mb-8"},W={class:"flex items-center space-x-2 text-sm"},X={class:"text-gray-900 font-medium"},Y={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},Z={class:"mb-10"},$={class:"flex items-center gap-3 mb-4"},ee={class:"bg-primary-100 text-primary-800 text-sm font-medium px-3 py-1 rounded-full"},te={key:0,class:"bg-accent-100 text-accent-800 text-sm font-medium px-3 py-1 rounded-full"},se={class:"text-3xl md:text-4xl font-bold text-gray-900 mb-6 leading-tight"},re={class:"flex flex-wrap items-center gap-6 text-gray-600 border-b border-gray-200 pb-6"},ae={class:"flex items-center"},le={class:"flex items-center"},ne={key:0,class:"bg-gray-50 border-l-4 border-primary-500 p-6 mb-10"},oe={class:"text-lg text-gray-700 italic leading-relaxed"},ie={class:"prose prose-lg max-w-none"},ce={class:"text-gray-900 leading-relaxed whitespace-pre-wrap"},de={key:0,class:"mt-8 text-center bg-gray-50 p-6 rounded-lg"},xe={class:"inline-block p-4 bg-white rounded-lg shadow-sm"},me={key:1,class:"mt-10 pt-8 border-t border-gray-200"},ue={class:"flex flex-wrap gap-3"},pe=["onClick"],ge={class:"mt-10 pt-8 border-t border-gray-200 flex justify-end"},ye={class:"mt-20 py-16 bg-gray-50"},he={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ve={class:"grid grid-cols-1 md:grid-cols-3 gap-8"},fe=t(n({__name:"NewsDetailView",setup(t){const n=j(),M=o(),z=s(),{currentArticle:V,isLoading:B,error:D}=y(z),N=h([]);function A(){return e(this,null,function*(){const t=n.params.slug;if(!t)return void M.push("/news");const s=yield z.fetchNewsBySlug(t);if(s){document.title=s.seo.title;const t=document.querySelector('meta[name="description"]');t&&t.setAttribute("content",s.seo.description),yield function(t){return e(this,null,function*(){try{yield z.fetchNews({category:t,limit:3}),N.value=z.news.filter(e=>{var t;return e.id!==(null==(t=V.value)?void 0:t.id)})}catch(e){}})}(s.category)}})}function H(e){e.target.style.display="none"}return v(()=>{A()}),f(()=>n.params.slug,(e,t)=>{e&&e!==t&&(z.resetCurrentArticle(),A())}),(e,t)=>{const s=_("router-link");return c(),i("div",J,[w(r),d("main",null,[b(B)?(c(),i("div",K,[...t[0]||(t[0]=[d("div",{class:"text-center"},[d("div",{class:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),d("p",{class:"mt-4 text-gray-600"},"正在加载新闻详情...")],-1)])])):b(D)?(c(),i("div",O,[d("div",Q,[t[2]||(t[2]=d("div",{class:"text-red-600 mb-4"},[d("svg",{class:"w-16 h-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[3]||(t[3]=d("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"新闻未找到",-1)),d("p",R,m(b(D)),1),w(s,{to:"/news",class:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"},{default:k(()=>[...t[1]||(t[1]=[g(" 返回新闻列表 ",-1)])]),_:1})])])):b(V)?(c(),i("div",T,[d("nav",U,[d("ol",W,[d("li",null,[w(s,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:k(()=>[...t[4]||(t[4]=[g("首页",-1)])]),_:1})]),t[6]||(t[6]=d("li",{class:"text-gray-400"},"/",-1)),d("li",null,[w(s,{to:"/news",class:"text-gray-500 hover:text-gray-700"},{default:k(()=>[...t[5]||(t[5]=[g("新闻动态",-1)])]),_:1})]),t[7]||(t[7]=d("li",{class:"text-gray-400"},"/",-1)),d("li",null,[w(s,{to:{name:"news",query:{category:b(V).category}},class:"text-gray-500 hover:text-gray-700"},{default:k(()=>[g(m(b(V).category),1)]),_:1},8,["to"])]),t[8]||(t[8]=d("li",{class:"text-gray-400"},"/",-1)),d("li",X,m(b(V).title),1)])]),d("article",Y,[d("header",Z,[d("div",$,[d("span",ee,m(b(V).category),1),b(V).featured?(c(),i("span",te," 推荐文章 ")):x("",!0)]),d("h1",se,m(b(V).title),1),d("div",re,[d("div",ae,[t[9]||(t[9]=d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),d("span",null,m(b(V).author),1)]),d("div",le,[t[10]||(t[10]=d("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),d("span",null,m((n=b(V).publishDate,new Date(n).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}))),1)])])]),b(V).excerpt?(c(),i("div",ne,[d("p",oe,m(b(V).excerpt),1)])):x("",!0),d("div",ie,[d("div",ce,m(b(V).content),1),"微信平台上线"===b(V).slug?(c(),i("div",de,[t[11]||(t[11]=d("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},'扫描二维码关注"水中的放大镜"',-1)),d("div",xe,[d("img",{src:a,alt:"水中的放大镜微信二维码",class:"w-48 h-48 object-cover",onError:H},null,32)]),t[12]||(t[12]=d("p",{class:"text-sm text-gray-600 mt-3"},'长按识别二维码或搜索"水中的放大镜"关注我们',-1))])):x("",!0)]),b(V).tags.length>0?(c(),i("div",me,[t[13]||(t[13]=d("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"相关标签",-1)),d("div",ue,[(c(!0),i(u,null,p(b(V).tags,e=>(c(),i("span",{key:e,class:"inline-block bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm px-4 py-2 rounded-full cursor-pointer transition-colors",onClick:t=>function(e){M.push({name:"news",query:{search:e}})}(e)}," #"+m(e),9,pe))),128))])])):x("",!0),d("div",ge,[w(s,{to:"/news",class:"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors"},{default:k(()=>[...t[14]||(t[14]=[d("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),g(" 返回新闻列表 ",-1)])]),_:1})])]),d("section",ye,[d("div",he,[t[15]||(t[15]=d("h2",{class:"text-2xl font-bold text-gray-900 mb-8 text-center"},"相关新闻",-1)),d("div",ve,[(c(!0),i(u,null,p(N.value,e=>(c(),C(G,{key:e.id,article:e},null,8,["article"]))),128))])])])])):x("",!0)]),w(l)]);var n}}}),[["__scopeId","data-v-8dc4e27c"]]);export{fe as default};
