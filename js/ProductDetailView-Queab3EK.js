var e=(e,t,s)=>new Promise((l,r)=>{var a=e=>{try{n(s.next(e))}catch(t){r(t)}},o=e=>{try{n(s.throw(e))}catch(t){r(t)}},n=e=>e.done?l(e.value):Promise.resolve(e.value).then(a,o);n((s=s.apply(e,t)).next())});import{d as t,u as s,j as l,p as r,l as a,k as o,B as n,F as i,z as c,D as d,I as u,r as m,c as g,o as p,w as x,f as y,A as v,m as f,n as h,x as b,E as k,t as w}from"./vendor-vue-DfeTMTng.js";import{a as j,u as C,A as _,_ as M}from"./index-CbVirBU-.js";import"./vendor-utils-ByYb-_ZS.js";const B={class:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group"},P={class:"relative h-48 bg-gradient-to-br from-primary-50 to-secondary-50 overflow-hidden"},z=["src","alt"],L={key:1,class:"flex items-center justify-center h-full"},H={class:"absolute top-4 left-4"},A={class:"bg-primary-600 text-white text-xs font-medium px-3 py-1 rounded-full"},E={key:2,class:"absolute top-4 right-4"},V={class:"p-6"},q={class:"mb-3"},D={class:"text-xl font-bold text-gray-900 group-hover:text-primary-600 transition-colors"},I={class:"text-gray-600 text-sm mb-4 line-clamp-3"},S={key:0,class:"mb-4"},$={class:"flex flex-wrap gap-2"},F={key:0,class:"inline-block text-gray-500 text-xs"},O=j(t({__name:"ProductCard",props:{product:{}},setup(e){const t=e,u=s();function m(){u.push({name:"product-detail",params:{slug:t.product.slug}})}function g(){}function p(e){e.target.style.display="none"}return(e,t)=>(r(),l("div",B,[a("div",P,[e.product.images.main?(r(),l("img",{key:0,src:e.product.images.main,alt:e.product.name,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy",onError:p},null,40,z)):(r(),l("div",L,[...t[0]||(t[0]=[a("div",{class:"text-center text-gray-400"},[a("svg",{class:"w-16 h-16 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2"})]),a("p",{class:"text-sm"},"暂无图片")],-1)])])),a("div",H,[a("span",A,n(e.product.category.name),1)]),"active"!==e.product.status?(r(),l("div",E,[...t[1]||(t[1]=[a("span",{class:"bg-gray-500 text-white text-xs font-medium px-3 py-1 rounded-full"}," 暂停销售 ",-1)])])):o("",!0)]),a("div",V,[a("div",q,[a("h3",D,n(e.product.name),1)]),a("p",I,n(e.product.description),1),e.product.features.length>0?(r(),l("div",S,[a("div",$,[(r(!0),l(i,null,c(e.product.features.slice(0,3),e=>(r(),l("span",{key:e,class:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded"},n(e),1))),128)),e.product.features.length>3?(r(),l("span",F," +"+n(e.product.features.length-3)+" 项特性 ",1)):o("",!0)])])):o("",!0),a("div",{class:"flex items-center justify-between"},[a("button",{onClick:m,class:"flex items-center text-primary-600 hover:text-primary-700 font-medium transition-colors"},[...t[2]||(t[2]=[d(" 查看详情 ",-1),a("svg",{class:"w-4 h-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),a("div",{class:"flex items-center space-x-2"},[a("button",{onClick:g,class:"p-2 text-gray-400 hover:text-primary-600 transition-colors",title:"加入收藏"},[...t[3]||(t[3]=[a("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)])])])])])]))}}),[["__scopeId","data-v-763fe9ec"]]),G={class:"product-detail-page"},J={key:0,class:"min-h-screen flex items-center justify-center"},K={key:1,class:"min-h-screen flex items-center justify-center"},N={class:"text-center"},Q={class:"text-gray-600 mb-6"},R={key:2,class:"py-8"},T={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-8"},U={class:"flex items-center space-x-2 text-sm"},W={class:"text-gray-900 font-medium"},X={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Y={class:"lg:grid lg:grid-cols-2 lg:gap-x-8 lg:items-start"},Z={class:"flex flex-col-reverse"},ee={key:0,class:"hidden mt-6 w-full max-w-2xl mx-auto sm:block lg:max-w-none"},te={class:"grid grid-cols-4 gap-6"},se=["onClick"],le=["src","alt"],re={class:"w-full aspect-w-1 aspect-h-1"},ae={class:"h-96 bg-gradient-to-br from-primary-50 to-secondary-50 rounded-lg overflow-hidden"},oe=["src","alt"],ne={key:1,class:"flex items-center justify-center h-full"},ie={class:"mt-10 px-4 sm:px-0 sm:mt-16 lg:mt-0"},ce={class:"mb-4"},de={class:"inline-block bg-primary-100 text-primary-800 text-sm font-medium px-3 py-1 rounded-full"},ue={class:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl mb-6"},me={class:"space-y-6"},ge={class:"text-gray-700 leading-relaxed"},pe={key:0},xe={class:"space-y-2"},ye={class:"text-gray-700"},ve={key:1},fe={class:"bg-gray-50 rounded-lg p-4"},he={class:"space-y-2"},be={class:"font-medium text-gray-900"},ke={class:"text-gray-700"},we={class:"border-t pt-6"},je={class:"flex flex-wrap gap-2"},Ce={class:"mt-16 py-16 bg-gray-50"},_e={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Me={class:"grid grid-cols-1 md:grid-cols-3 gap-8"},Be=t({__name:"ProductDetailView",setup(t){const j=b(),B=s(),P=C(),{currentProduct:z,isLoading:L,error:H}=u(P),A=m(0),E=m([]),V=g(()=>z.value?z.value.images.gallery.length>0?z.value.images.gallery[A.value]:z.value.images.main:null),q=g(()=>z.value&&Object.keys(z.value.specifications).length>0);function D(){return e(this,null,function*(){const t=j.params.slug;if(!t)return void B.push("/products");const s=yield P.fetchProductBySlug(t);if(s){document.title=s.seo.title;const t=document.querySelector('meta[name="description"]');t&&t.setAttribute("content",s.seo.description),yield function(t){return e(this,null,function*(){try{yield P.fetchProducts({category:t,limit:3});E.value=P.products.filter(e=>{var t;return e.id!==(null==(t=z.value)?void 0:t.id)})}catch(e){}})}(s.category.slug)}})}function I(e){e.target.style.display="none"}function S(){}return p(()=>{D()}),x(()=>j.params.slug,(e,t)=>{e&&e!==t&&(P.resetCurrentProduct(),D())}),(e,t)=>{const s=h("router-link");return r(),l("div",G,[y(_),a("main",null,[v(L)?(r(),l("div",J,[...t[0]||(t[0]=[a("div",{class:"text-center"},[a("div",{class:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"}),a("p",{class:"mt-4 text-gray-600"},"正在加载产品详情...")],-1)])])):v(H)?(r(),l("div",K,[a("div",N,[t[2]||(t[2]=a("div",{class:"text-red-600 mb-4"},[a("svg",{class:"w-16 h-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[3]||(t[3]=a("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"产品未找到",-1)),a("p",Q,n(v(H)),1),y(s,{to:"/products",class:"inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"},{default:f(()=>[...t[1]||(t[1]=[d(" 返回产品列表 ",-1)])]),_:1})])])):v(z)?(r(),l("div",R,[a("nav",T,[a("ol",U,[a("li",null,[y(s,{to:"/",class:"text-gray-500 hover:text-gray-700"},{default:f(()=>[...t[4]||(t[4]=[d("首页",-1)])]),_:1})]),t[6]||(t[6]=a("li",{class:"text-gray-400"},"/",-1)),a("li",null,[y(s,{to:"/products",class:"text-gray-500 hover:text-gray-700"},{default:f(()=>[...t[5]||(t[5]=[d("产品中心",-1)])]),_:1})]),t[7]||(t[7]=a("li",{class:"text-gray-400"},"/",-1)),a("li",null,[y(s,{to:{name:"products",query:{category:v(z).category.slug}},class:"text-gray-500 hover:text-gray-700"},{default:f(()=>[d(n(v(z).category.name),1)]),_:1},8,["to"])]),t[8]||(t[8]=a("li",{class:"text-gray-400"},"/",-1)),a("li",W,n(v(z).name),1)])]),a("div",X,[a("div",Y,[a("div",Z,[v(z).images.gallery.length>0?(r(),l("div",ee,[a("div",te,[(r(!0),l(i,null,c(v(z).images.gallery,(e,t)=>(r(),l("button",{key:t,onClick:e=>A.value=t,class:k(["relative h-24 bg-white rounded-md flex items-center justify-center text-sm font-medium uppercase text-gray-900 cursor-pointer hover:bg-gray-50 focus:outline-none focus:ring focus:ring-offset-4 focus:ring-primary-500",A.value===t?"ring-2 ring-primary-500":"ring-1 ring-gray-300"])},[a("img",{src:e,alt:`${v(z).name} 图片 ${t+1}`,class:"w-full h-full object-cover rounded-md"},null,8,le)],10,se))),128))])])):o("",!0),a("div",re,[a("div",ae,[V.value?(r(),l("img",{key:0,src:V.value,alt:v(z).name,class:"w-full h-full object-cover",onError:I},null,40,oe)):(r(),l("div",ne,[...t[9]||(t[9]=[a("div",{class:"text-center text-gray-400"},[a("svg",{class:"w-24 h-24 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2"})]),a("p",null,"暂无图片")],-1)])]))])])]),a("div",ie,[a("div",ce,[a("span",de,n(v(z).category.name),1)]),a("h1",ue,n(v(z).name),1),a("div",me,[a("div",null,[t[10]||(t[10]=a("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"产品描述",-1)),a("p",ge,n(v(z).description),1)]),v(z).features.length>0?(r(),l("div",pe,[t[12]||(t[12]=a("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"产品特性",-1)),a("ul",xe,[(r(!0),l(i,null,c(v(z).features,e=>(r(),l("li",{key:e,class:"flex items-start"},[t[11]||(t[11]=a("svg",{class:"h-5 w-5 text-primary-500 mr-3 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),a("span",ye,n(e),1)]))),128))])])):o("",!0),q.value?(r(),l("div",ve,[t[13]||(t[13]=a("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"技术规格",-1)),a("div",fe,[a("dl",he,[(r(!0),l(i,null,c(v(z).specifications,(e,t)=>(r(),l("div",{key:t,class:"flex justify-between"},[a("dt",be,n(t)+":",1),a("dd",ke,n(e),1)]))),128))])])])):o("",!0),a("div",{class:"space-y-3"},[a("button",{onClick:S,class:"w-full flex items-center justify-center px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},[...t[14]||(t[14]=[a("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1),d(" 收藏 ",-1)])])]),a("div",we,[t[15]||(t[15]=a("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"关键词",-1)),a("div",je,[(r(!0),l(i,null,c(v(z).seo.keywords,e=>(r(),l("span",{key:e,class:"inline-block bg-gray-100 text-gray-700 text-sm px-3 py-1 rounded-full"},n(e),1))),128))])])])])])]),a("section",Ce,[a("div",_e,[t[16]||(t[16]=a("h2",{class:"text-2xl font-bold text-gray-900 mb-8"},"相关产品",-1)),a("div",Me,[(r(!0),l(i,null,c(E.value,e=>(r(),w(O,{key:e.id,product:e},null,8,["product"]))),128))])])])])):o("",!0)]),y(M)])}}});export{Be as default};
