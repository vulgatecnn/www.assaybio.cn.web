var e=(e,t,a)=>new Promise((s,l)=>{var r=e=>{try{n(a.next(e))}catch(t){l(t)}},o=e=>{try{n(a.throw(e))}catch(t){l(t)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,o);n((a=a.apply(e,t)).next())});import{d as t,I as a,r as s,o as l,w as r,j as o,f as n,l as i,y as c,O as d,A as p,P as u,F as x,z as m,B as g,t as y,k as v,D as f,G as h,x as b,n as w,p as k,m as _}from"./vendor-vue-DfeTMTng.js";import{b as j,A as C,_ as P}from"./index-CbVirBU-.js";/* empty css                                                                 */import{_ as M}from"./Pagination.vue_vue_type_script_setup_true_lang-Cwe2tknW.js";import{d as V}from"./debounce-DWqR91Ur.js";import"./vendor-utils-ByYb-_ZS.js";const B={class:"news-page"},z={class:"py-8 bg-gray-50"},H={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},D={class:"flex flex-col lg:flex-row gap-6"},N={class:"flex-1"},q={class:"relative"},A={class:"lg:w-64"},I=["value"],L={class:"py-16 bg-white"},T={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},U={key:0,class:"text-center py-12"},$={key:1,class:"text-center py-12"},F={class:"text-gray-600 mb-4"},G={key:2},O={class:"mb-8"},E={class:"text-gray-600"},J={class:"font-semibold"},K={class:"space-y-6"},Q={class:"p-6"},R={class:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4"},S={class:"flex-1"},W={class:"flex items-center gap-3 mb-3"},X={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800"},Y={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},Z={class:"text-sm text-gray-500"},ee={class:"text-xl font-bold text-gray-900 mb-3 hover:text-primary-600 transition-colors"},te={class:"text-gray-600 mb-4 leading-relaxed"},ae={class:"flex items-center justify-between"},se={class:"flex items-center gap-2"},le={class:"text-sm text-gray-500"},re={class:"flex flex-wrap gap-2"},oe=["onClick"],ne={class:"flex items-center lg:flex-col lg:items-end gap-3"},ie={key:3,class:"text-center py-12"},ce=t({__name:"NewsView",setup(t){const ce=b(),de=j(),{news:pe,categories:ue,isLoading:xe,error:me,pagination:ge}=a(de),ye=s(""),ve=s(""),fe=V(()=>{he()},500);function he(t=1){return e(this,null,function*(){yield de.fetchNews({page:t,limit:12,search:ye.value,category:ve.value})})}function be(e){he(e),window.scrollTo({top:0,behavior:"smooth"})}function we(){he(1)}return l(()=>e(this,null,function*(){!function(){const e=ce.query;e.search&&(ye.value=e.search),e.category&&(ve.value=e.category)}(),yield Promise.all([de.fetchCategories(),he()])})),r(()=>ce.query,e=>{e.search!==ye.value&&(ye.value=e.search||""),e.category!==ve.value&&(ve.value=e.category||""),he(1)}),(e,t)=>{const a=w("router-link");return k(),o("div",B,[n(C),i("main",null,[t[11]||(t[11]=i("section",{class:"bg-primary-900 text-white py-20"},[i("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center"},[i("h1",{class:"text-4xl md:text-5xl font-bold mb-6"},"新闻动态"),i("p",{class:"text-xl text-primary-200 max-w-3xl mx-auto"}," 了解公司最新动态和行业资讯 ")])],-1)),i("section",z,[i("div",H,[i("div",D,[i("div",N,[i("div",q,[c(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>ye.value=e),type:"text",placeholder:"搜索新闻标题或内容...",class:"w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",onInput:t[1]||(t[1]=(...e)=>p(fe)&&p(fe)(...e))},null,544),[[d,ye.value]]),t[3]||(t[3]=i("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[i("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),i("div",A,[c(i("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>ve.value=e),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",onChange:we},[t[4]||(t[4]=i("option",{value:""},"全部分类",-1)),(k(!0),o(x,null,m(p(ue),e=>(k(),o("option",{key:e.name,value:e.name},g(e.name)+" ("+g(e.count)+") ",9,I))),128))],544),[[u,ve.value]])])])])]),i("section",L,[i("div",T,[p(xe)?(k(),o("div",U,[...t[5]||(t[5]=[i("div",{class:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin"},null,-1),i("p",{class:"mt-4 text-gray-600"},"正在加载新闻...",-1)])])):p(me)?(k(),o("div",$,[t[6]||(t[6]=i("div",{class:"text-red-600 mb-4"},[i("svg",{class:"w-16 h-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),i("p",F,g(p(me)),1),i("button",{onClick:he,class:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"}," 重新加载 ")])):p(pe).length>0?(k(),o("div",G,[i("div",O,[i("p",E,[t[7]||(t[7]=f(" 找到 ",-1)),i("span",J,g(p(ge).total),1),t[8]||(t[8]=f(" 篇新闻 ",-1))])]),i("div",K,[(k(!0),o(x,null,m(p(pe),s=>(k(),o("article",{key:s.id,class:"bg-white border border-gray-200 rounded-lg hover:shadow-lg transition-all duration-300 overflow-hidden"},[i("div",Q,[i("div",R,[i("div",S,[i("div",W,[i("span",X,g(s.category),1),s.featured?(k(),o("span",Y," 推荐 ")):v("",!0),i("span",Z,g(e.formatDate(s.publishDate)),1)]),i("h2",ee,[n(a,{to:`/news/${s.slug}`},{default:_(()=>[f(g(s.title),1)]),_:2},1032,["to"])]),i("p",te,g(s.excerpt),1),i("div",ae,[i("div",se,[i("span",le,"作者: "+g(s.author),1)]),i("div",re,[(k(!0),o(x,null,m(s.tags.slice(0,3),t=>(k(),o("span",{key:t,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-100 text-gray-600 hover:bg-gray-200 cursor-pointer transition-colors",onClick:a=>e.searchByTag(t)}," #"+g(t),9,oe))),128))])])]),i("div",ne,[n(a,{to:`/news/${s.slug}`,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 transition-colors"},{default:_(()=>[...t[9]||(t[9]=[f(" 阅读全文 ",-1),i("svg",{class:"ml-2 -mr-1 w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[i("path",{"fill-rule":"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])]),_:2},1032,["to"])])])])]))),128))]),p(ge).totalPages>1?(k(),y(M,{key:0,"current-page":p(ge).page,"total-pages":p(ge).totalPages,total:p(ge).total,onPageChange:be,class:"mt-12"},null,8,["current-page","total-pages","total"])):v("",!0)])):(k(),o("div",ie,[...t[10]||(t[10]=[h('<div class="text-gray-400 mb-4"><svg class="w-16 h-16 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path></svg></div><h3 class="text-lg font-semibold text-gray-900 mb-2">暂无新闻</h3><p class="text-gray-600">没有找到符合条件的新闻，请调整搜索条件</p>',3)])]))])])]),n(P)])}}});export{ce as default};
